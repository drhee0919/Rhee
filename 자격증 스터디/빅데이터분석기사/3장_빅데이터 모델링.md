### 3장. 빅데이터 모델링

#### 1. 분석 모형 설계

> **1-1) 분석 절차 수립**
>
> > - 분석 모형 선정
> >
> > > * 분석 모형은 일반적으로 많이 사용되는 데이터 분석 방법을 추상화한 패턴, 계획, 설명 등을 의미
> > > * 분석 목적에 따라 데이터 분석 방법은 달라질 수 있음 
> > > * 분석 방법들 예시 
> > >
> > > > * 통계분석 
> > > >
> > > > > 통계분석은 특정 집단이나 불확실한 현상을 데이터를 통해 이해하고 추론을 통해 의사결정하는 과정을 말함 
> > > > >
> > > > > * 기술통계 
> > > > >
> > > > > > 데이터를 요약 정리하고 이해하기 위해 평균, 표준 편차 등 기초통계량을 구하거나 그래프로 표현하는 분석 방법 
> > > > >
> > > > > * 추론 통계
> > > > >
> > > > > > 수집된 데이터를 기반으로 모집단에 대해 추정하고 가설을 검정하는 분석방법 
> > > >
> > > > * 데이터마이닝
> > > >
> > > > > * 데이터에 숨어 있는 유용한 정보를 찾아내는 과정
> > > > > * 분류, 추정, 예측, 연관, 군집, 기술 분석 등이 있음 
> > > >
> > > > * 머신러닝
> > > >
> > > > > * 분석 모형 알고리즘이 데이터를 학습하고 학습한 정보를 바탕으로 결과를 출력하는 분석 방법
> > > > > * 종속변수의 존재 여부, 학습 방법 등에 따라 지도 학습, 비지도 학습, 강화학습으로 구분 
> > > > > * 지도학습
> > > > >
> > > > > > * 정답에 해당하는 종속변수가 포함되어 있는 데이터를 학습
> > > > > > * 종속변수와 독립변수 간의 관계를 분석하여 분류, 예측 등의 문제를 해결 
> > > > > > * 종속변수가 연속형인 경우 수치예측 수행
> > > > > > * 종속변수가 범주형인 경우 분류예측 수행 
> > > > > > * Ex/ 회귀분석, 로지스틱 회귀분석, 나이브베이즈, KNN, 의사결정나무, 인공신경망, SVM, 랜덤포레스트 등
> > > > >
> > > > > * 비지도 학습
> > > > >
> > > > > > * 종속변수가 포함되지 않는 데이터를 학습
> > > > > > * 예측문제보다는 현상 설명, 특징 도출, 패턴 도출 등의 문제를 해결 
> > > > > > * Ex/ 군집화(K-means, SOM, 계층군집, ...) 차원축소(주성분분석, 선형판별분석, ...) 연관분석, 자율학습 인공신경망
> > >
> > > * 데이터 유형에 따른 모형 구분 
> > >
> > > > * 데이터의 특성에 따라 적용 가능한 분석 모형이 다름 
> > > > * 종속변수의 존재 여부, 종속변수의 수, 데이터 유형, 변수들 관의 관계, 데이터의 크기 등의 데이터 특성을 고려해야 함 
> >
> > - 분석 모형 정의
> >
> > > 선정한 분석 모형을 데이터에 적용하기 위한 상세 정의 단계 
> > >
> > > * 변수선택
> > >
> > > > * 모형을 구성하는 변수들을 식별하고 구조화하는 과정 
> > > > * 탐색적 데이터 분석(EDA)를 수행하고 차원축소, 파생변수 생성, 변수 변환, 불균형 처리 등을 통해 유의 변수를 식별하거나 생성 
> > > > * 전진 선택법, 후진 제거법, 단계적 선택법 등의 변수 선택 방법을 활용하기도 함 
> > >
> > > * 하이퍼파라미터 튜닝
> > >
> > > > * 모형의 성능에 간접적인 영향을 미치는 하이퍼파라미터를 조정하여 분석 모형의 성능을 최적화하는 과정 
> > > >
> > > > ※파라미터와 하이퍼파라미터 
> > > >
> > > > | 파라미터                    | 하이퍼파라미터            |
> > > > | --------------------------- | ------------------------- |
> > > > | 모형 내부요소               | 모형 외부요소             |
> > > > | 모형의 성능에 직접적인 영향 | 파라미터 결정을 위해 사용 |
> > > > | 데이터 학습을 통해 자동결정 | 사용자가 경험적으로 결정  |
> > > >
> > > > * 하이퍼파라미터 튜닝방법
> > > >
> > > > > * 매뉴얼 서치
> > > > >
> > > > > > * 사용자의 직감 또는 경험에 근거한 하이퍼파라미터 조합,조정 방식 
> > > > > > * 비효율적이며 그리드 서치 또는 랜덤 서치 수행 후 추가적인 세부 조정시 주로 활용 
> > > > >
> > > > > * 그리드 서치
> > > > >
> > > > > > * 하이퍼파라미터의 가능한 모든 조합을 시도하여 최적의 파라미터 값을 찾는 방법 
> > > > > > * 후보를 직접 선정하므로 후보 내에서 가장 좋은 결과를 얻을 수 있으나 후보가 아닌 값을 시도를 하지 않는다 
> > > > > > * 모든 조합을 시도하므로 후보 수가 증가하면 계산 시간이 기하급수적 증가
> > > > >
> > > > > * 랜덤 서치
> > > > >
> > > > > > * 하이퍼파라미터 값의 범위를 지정하고 무작위 표본추출을 통해 생성한 조합을 시도하여 최적의 파라미터 값을 찾는 방법 
> > > > > > * 작동원리는 그리드 서치와 비슷하나 그리드 서치의 단덤을 보완 
> > > > > > * 지정된 범위에서 난수를 통해 확률적으로 탐색하므로 불필요한 값의 중복을 줄이고 상대적으로 중요한 값을 많이 탐색할 수 있음 
> >
> > - 분석 모형의 구축 절차 
> >
> > > * 요건 정의→모델링→검증 및 테스트→적용 단계로 구성 
> > > * 요건정의 : 요구사항 도출, 분석 추진 계획 수립, 요구사항 확정 
> > > * 모델링 : 데이터마트 설계 및 구축, 탐색적 분석 및 유의변수 도출, 모델링, 모델성능평가
> > > * 검증 및 테스트 : 운영 환경 테스트, 비즈니스 영향도 평가
> > > * 적용 : 운영시스템 적용, 주기적 모델 업데이트 
>
> **1-2)분석 환경 구축**
>
> > - 분석 도구 선정 
> >
> > > * R
> > >
> > > > * 통계학자들이 개발한 S언어 기반  오픈소스 프로그래밍 언어 
> > > > * 새로운 기능을 구현하고 공유하는 강력한 커뮤니티 존재 (CRAN
> > > > * Windows, Mac OS, Linux등 다양한 OS에서 사용가능
> > > > * R Studio라는 통합개발환경(IDE)가 존재
> > >
> > > * Python
> > >
> > > > * C언어 기반의 프로그래밍 언어 
> > > > * 데이터 분석 외에도 범용성이 매우 높은 언어 
> > > > * Tensorflow, Keras 등 딥러닝 패키지 기반 인공지능 영역에서 큰 강점 
> > >
> > > * SAS & SPSS
> > >
> > > > * 간단한 클릭방식, 드래그 앤 드롭 방식으로 데이터 분석 가능 
> > > > * 프로그래밍 언어에 대한 지식이 부족한 통계학자들도 사용 가능 
> > > > * 유료 라이센스 방식이라 최신 기술반영이 느리고 덜 보편화 
> >
> > - 데이터 분할
> >
> > > 분석 모형의 과적합을 방지하고 일반화 성능을 향상시키기 위함 
> > >
> > > * 홀드아웃
> > >
> > > > * 가장 보편저인 방법으로 랜덤 추출을 통해 데이터 분할
> > > > * 통상 검증 데이터 60~80%, 테스트 데이터 20%~40%로 분할
> > >
> > > * K-fold 교차검증
> > >
> > > > * 테스트 데이터를 제외한 데이터를 무작위로 중복되지 않는 K개의 데이터로 분할
> > > > * (K-1)개의 데이터를 학습 데이터로 사용하고 나머지 1개 데이터를 검증 데이터로 사용 
> > > > * 검증 데이터를 바꾸며 K번 반복해 분할된 데이터가 한번씩 검증 데이터로 사용되게 함
> > >
> > > * 부트스트랩
> > >
> > > > * 데이터의 분포가 치우쳐 있거나 데이터 건수가 너무 적을 때 사용 
> > > > * 복원 추출을 통해 전체 데이터와 동일한 사이즈의 샘플 데이터 추출<br>→ 이때, 어떤 데이터는 부트스트랩에 1번 이상 포함되나, 어떤 데이터는 1번도 포함X 
> > > > * 추출 후 부트스트램 샘플 데이터에 포함되지 않은 부분을 테스트 데이터로 사용
> > > > * 부트스트랩 샘플링르 통해 확보되는 학습 데이터는 확률적으로 전체 데이터의 약 63.2%포함 

#### 2. 분석 기법 적용

> **2-1) 분석 기법**
>
> > - 회귀분석 
> >
> > > * 하나 이상의 독립변수들이 종속변수에 미치는 영향을 추정하는 통계분석기법 
> > > * 회귀분석은 선형성, 독립성, 등분산성, 정규성 네가지 가정을 만족하는 데이터에 사용
> > >
> > > > * 선형성: 독립변수와 종속변수는 선형적 
> > > > * 독립성: 단순 회귀분석에서는 잔차와 독립변수의 값이 서로 독립 
> > > > * 등분산성: 잔차의 분산이 독립변수와 무관하게 일정 
> > > > * 정규성: 잔차항이 정규분포의 형태를 띰
> > >
> > > * 회귀분석의 종류에는 단순 회쉬, 다중 회귀, 다항 회귀, 곡선 회귀, 비선형 회귀가 있음
> > >
> > > > * 단순 회귀: 독립변수가 1개이며 종속변수와의 관계가 직선
> > > > * 다중 회귀: 독립변수가 k개이며 종속변수와의 관계가 선형
> > > > * 다항 회귀: 독립변수와 종속변수와의 관계가 1차 함수 이상인 관계
> > > > * 곡선 회귀: 독립변수가 1개이며, 종속 변수와의 관계가 곡선
> > > > * 비선형 회귀: 회귀식의 모양이 미지의 모수들의 선형 관계로 이뤄지지 않은 모형
> > >
> > > * 단순선형 회귀분석 
> > >
> > > > * 회귀분석 모형 중 가장 단순한 모양
> > > > * 독립변수와 종속변수가 한 개씩 있으며, 오차항이 있는 선형관계로 이루어짐<br>→ 독립변수와 종속변수의 관계가 직선
> > > > * 회귀계수의 추정 
> > > >
> > > > > * 최소제곱법(최소자승법)을 사용하여 추정 
> > > > >
> > > > > ※ 최소제곱법<br>측정값을 기초로 해서 제곱합을 만들고, 그것을 최소로 하는 값을 구하여 측정결과를 처리하는 방식 
> > > >
> > > > * 단순선형 회귀분석의 검정
> > > >
> > > > > * 회귀계수가 0이면 입력변수(x) 와 출력변수(y)는 <u>인과관계</u>가 없다
> > > > > * 결정계수(R^2)는 회귀 모형의 설명력을 보여주는 지표<br>→ 회귀선의 정확도를 평가<br>→ 전체 제곱 합에서 회귀 제곱 합의 비율 (SSR/SST)
> > >
> > > * 다중선형 회귀분석 
> > >
> > > > * 다중선형 회귀분석 역시 최소제곱법을 이용한 각각의 독립변수의 가중치 역할을 하는 회귀계수를 구한다 
> > > > * 모형의 통계적 유의성 
> > > > * 다중선형 회귀분석의 검정 
> > > >
> > > > > * 모형의 통계적 유의성은 F-통계량으로 확인 (p-value<=0.05 회귀식의 유의)
> > > > >
> > > > > * 결정계수(R^2)는 회귀 모형의 설명력을 보여주는 지표
> > > > >
> > > > > * 잔차와 종속변수의 산점도로 모형의 적합성 파악
> > > > >
> > > > > * 다중공선성에 대해 조정(ex/ 문제변수 제거, 주성분 회귀 모형 사용)
> > > > >
> > > > >   ※다중공선성: 설명 변수들 사이에 선형관계가 존재하여 추정에 부정적 영향
>
> **2-2) 고급 분석 기법**
>
> > - 범주형 자료 분석
> >
> > > * t-검정
> > >
> > > > * 모집단의 분산이나 표준편차를 알지 못할 때 모집단을 대표하는 표본으로부터 추정된 분산이나 표준편차를 가지고 검정하는 방법
> > > > * “두 모집단의 평균간의 차이는 없다”라는 귀무가설과 “두 모집단의 평균 간에 차이가 있다”라는 대립가설 중에 하나를 선택할 수 있도록 하는 통계적 검정방법
> > >
> > > * 분산분석(ANOVA)
> > >
> > > > * 서로 다른 그룹의 평균(또는 산술평균)에서 분산값을 비교하는 데 사용되는 통계 공식
> > > >
> > > > * 다양한 시나리오에서 서로 다른 그룹의 평균간에 차이가 있는지 확인
> > > >
> > > >   → 샘플 모집단을 여러 그룹으로 나누고 각 그룹의 평균비교로 다른지 유사한지 판단
> > > >
> > > > * **F통계량** 
> > > >
> > > > > * 분산분석의 결과는 F통계량으로 나타남 
> > > > >
> > > > > * F통계량의 비율은 그룹 내 분산과 그룹 간 분산 간의 차이를 보여주며, 궁극적으로 귀무 가설이 지지되거나 거부된다는 결론을 내릴 수있는 그림을 생성
> > > > >
> > > > >   : 그룹 간 유의한 차이 → 귀무가설 지원 X → F비율 증가
> > > >
> > > > - **종속 변수** : 독립 변수의 영향을 받는 것으로 설정할 수 있는 측정 항목
> > > > - **독립 변수** : 종속 변수에 영향을 미칠 수 있는 측정 항목
> > > > - **귀무 가설 (H0)** : 그룹 또는 평균간에 차이가 없는 경우로, ANOVA 검정의 결과에 따라 귀무 가설이 수락되거나 거부
> > > > - **대립 가설 (H1)** : 그룹과 평균 사이에 유의미한 차이가 있다는 가설이 있는 경우
> > > > - **인자 및 수준** : ANOVA 용어에서 독립 변수는 종속 변수에 영향을 미치는 인자. 수준은 실험에 사용되는 독립 변수의 서로 다른 값을 나타냄
> > > > - **모수 인자 모델** : 일부 실험에서는 요인에 대해 이산 수준 집합만 사용합니다. 예를 들어, 모수 인자 검정에서는 약물의 세 가지 다른 용량을 검사하고 다른 용량은 고찰하지 않습니다.
> > > > - **변량 인자 모델** :이 모델은 독립 변수의 가능한 모든 값에서 변량 수준 값을 가져옵니다.
> > >
> > > * 분할표분석 
> > > * 카이제곱검정
> > > * 피셔의 정확 검정
> >
> > - 다변량 분석 
> >
> > > * 상관관계분석
> > > * 다차원 척도법(MDS)
> > > * 다변량 분산분석(MANOVA)
> > > * 주성분분석(PCA
> > > * 요인분석(FA)
> >
> > - 시계열 분석
> >
> > > * 시계열 데이터 
> > > * 시계열 모형
> >
> > - 베이지안 기법
> >
> > > * 조건부 확률
> > > * 베이즈 정리
> > > * 나이브 베이즈
> >
> > - 딥러닝 분석 
> >
> > > * 주요 하이퍼파라미터
> > > * 합성곱신경망(CNN)
> > > * 순환신경함(RNN)
> > > * 생성적 적대 신경망(GAN)
> >
> > - 비정형 데이터 분석
> >
> > > * 텍스트 마이닝
> > > * 소셜 네트워크 분석(SNA)
> >
> > - 앙상블 분석
> >
> > > * 배깅 
> > >
> > > > * 랜덤포레스트
> > >
> > > * 부스팅
> >
> > - 비모수 통계
> >
> > > * 부호검정(Sign test)
> > > * 윌콕슨 부호 순위 검정
> > > * 만-위트니 U 검정
> > > * 크루스칼-왈리스 검정
> > > * 런 검정(Run test)
> > > * 스피어만 순위 상관계수 
