### 과목 Ⅰ : 데이터 모델링의 이해 



#### <목차 - SQL 자격검정 실전문제>

**제 1장: 데이터 모델링의 이해**

> - 제 1절 데이터 모델의 이해
> - 제 2절 엔티티
> - 제 3절 속성
> - 제 4절 관계
> - 제 5절 식별자 



- 제 1절: 데이터 모델의 이해

> 데이터 모델링이란?
>
> > * 정보시스템을 구축하기 위한 데이터 관점의 업무 분석 기법
> > * 현실세계의 데이터(What)에 대해 약속된 표기법에 의해 표현하는 과정 
> > * 데이터베이스를 구축하기 위한 분석/설계의 과정 
>
> 
>
> 데이터 모델링 유의점 
>
> > * 중복(Duplicaiton)
> > * 비유연성(Inflexibility)
> > * 비일관성(Inconsistency)









**제 2장 데이터 모델과 성능**

> 제 1절 : 성능 데이터 모델링의 개요 
>
> > 1. 성능 데이터 모델링의 정의 
> >
> > > - 성능 데이터 모델링이란 데이터베이스 성능향상을 목적으로 설계단계의 데이터 모델링 때부터 성능과 관련된 사항이 데이터 모델링에 반영될 수 있도록 하는 것 
> > > - 데이터의 용량이 커지고 기업의 의사결정 속도가 빨라질 수록 데이터를 처리하는 속도는 빠르게 처리되어야 할 필요성을 반증해 준다 
> > > - 성능이 저하되는 데이터 모델의 경우 크게 세 가지 경우를 고려하여 그 성능을 향상시킬 수 있다. 
> > >
> > > ```
> > > 데이터 모델 구조의 의해 성능 저하 
> > > 데이터가 대용량이 됨으로 인해 불가피하게 성능 저하 
> > > 인덱스의 특성을 충분히 고려하지 않고 인덱스를 생성함으로 인해 성능 저하 
> > > ```
> > >
> > > ※ 성능 데이터 모델링이 단순히 반정규화만을 의미하지 않음을 주목해야 한다.
> > >
> > > ```
> > > - 성능 데이터 모델링은 정규화를 통해서도 수행될 수 있고 인덱스의 특징을 고려하
> > >   여 칼럼의 순서도 변형할 수 있다.
> > >   
> > > - 대량의 데이터특성에 따라 비록 정규화된 모델이라도 테이블을 수직 또는 수평
> > >   분할하여 적용하는 방법도 있고 
> > >   
> > > - 논리적인 테이블을 물리적인 테이블로 전환할 때 데이터 처리의 성격에 따라 
> > >   변환하는 방법도 성능 데이터 모델링의 범주에 포함될 수 있다. 
> > > ```
> > >
> > > 
> >
> > 2. 성능 데이터 모델링 수행 시점 
> >
> > > - 성능 향상을 위한 비용은 프로젝트 수행 중에 있어서 사전에 할 수 록 비용이 들지 않는다 
> > >
> > > - 특히 분석/설계 단계에서 데이터 모델에 성능을 고려한 데이터 모델링을 수행할 경우 성능저하에 따른 재업무(Rework) 비용을 최소화 할 수 있는 기회를 가지게 된다. 
> > >
> > >   → 분석/설계 단계에서 데이터베이스 처리 성능을 향상시킬 방법을 고민해야 한다. 
> >
> > 3. 성능 데이터 모델링 고려사항 
> >
> > ```
> > ① 데이터 모델링을 할 때 정규화를 정확하게 수행한다.
> > ② 데이터베이스 용량산정을 수행한다.
> > ③ 데이터베이스에 발생되는 트랜잭션의 유형을 파악한다.
> > ④ 용량과 트랜잭션의 유형에 따라 반정규화를 수행한다. 
> > ⑤ 이력모델의 조정, PK/FK조정, 슈퍼타입/서브타입 조정 등을 수행한다.
> > ⑥ 성능관점에서 데이터 모델을 검증한다. 
> > ```
> >
> > 
>
> 제 2절 : 정규화와 성능 
>
> > 1. 정규화를 통한 성능 향상 전략 
> >
> > > - 정규화란 다양한 유형의 검사를 통해 데이터 모델을 좀더 구조화하고 개선시켜 나가는 절차에 관련된 이론이다. 
> > > - 정규화는 기본적으로 데이터에 대한 중복성을 제거하여 주고 데이터가 관심사별로 처리되는 경우가 많기 때문에 '성능이 향상되는' 특징이 있다 
> > >
> > > ※ 경우에 따라서 안 그런 경우가 있기 때문에 '반정규화' 기법 사용 
> > >
> > > - 성능이란 1)<u>조회성능</u> 과 2)<u>입력/수정/삭제</u> 성능 두 부류로 구분된다. 
> > >
> > >   → 모델 구성방식에 따라 두 성능이 Trade-Off 되어 나타나는 경우가 많다.	
> > >
> > > - 정규화를 수행한다는 것은 데이터를 결정하는 결정자에 의해 함수적 종속을 가지고 있는 일반 속성을 의존자로 하여 입력/수정/삭제 이상을 제거하는 것 
> > >
> > > - 데이터의 중복속성을 제거하고 결정자에 의해 동일한 의미의 일반속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량이 최소화되는 경향이 있다. 
> > >
> > > - 일반적으로 정규화를 수행해야 데이터처리의 성능이 향상되며, 데이터의 조회처리 트랜잭션시에 성능저하가 나타날 수 있음.
> > >
> > > 
> > >
> > > 2. 정규화를 통한 성능 향상 사례(생략)
>
> 제 3절 : 반정규화와 성능 
>
> > 1. 반정규화를 통한 성능향상 전략 
> >
> > > - 반정규화란 정규화된 엔티티, 속성 관계에 대해서 시스템의 성능향상, 개발(Development)과 운영(Maintenance)의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링의 기법을 의미 
> > >
> > > - 데이터 무결성이 깨질 수 있는 위험을 무릅쓰고 데이터를 중복하여 반정규화를 적용하는 이유는 
> > >
> > >   1) 데이터를 조회할 때 디스크 I/O양이 많아서 성능이 저하되거나 경로가 너무 멀어 조인으로 인한 성능저하가 예상되거나 
> > >
> > >   2) 칼럼을 계산하여 읽을 때 성능이 저하될 것이 예상되는 경우 반정규화를 수행
> > >
> > >   → 중복성의 원리를 활용하여 데이터 조회시 성능을 향상시키는 역할을 할 수 있음 
> > >
> > > - 정규화만을 수행하면 엔티티의 개수가 증가하고 관계가 많아져 일부 여러개의 조인이 걸려야만 데이터를 가져오는 경우가 있다.(비식별자 관계일 경우 해당)
> > >
> > > - 프로젝트에서 설계 단계에서 반정규화를 적용하게 되는데 반정규화를 기술적으로 수행하지 않는 경우에는 
> > >
> > > > * 성능이 저하된 데이터베이스가 생성될 수 있고 
> > > > * 구축단계나 시험단계에서 반정규화를 적용할 때 수정에 따른 노력비용이 많이 들게된다. 
> > >
> > > ![반정규화 절차](.\반정규화 절차.PNG)
> > >
> > > > * 반정규화를 적용하기 위해서는 위 그림처럼 반정규화의 대상을 먼저 조사하고, 다른 방법을 적용할 수 있는지 검토하고 그 이후에 반정규화를 적용하도록 한다. 
> >
> > 2. 반정규화의 기법 
> >
> > >![테이블 반정규화](.\테이블 반정규화.PNG)
> > >
> > >![칼럼 반정규화 & 관계 반정규화](.\칼럼 반정규화 & 관계 반정규화.PNG)
> > >
> > >- 테이블과 칼럼의 반정규화는 데이터 무결성에 영향을 미치게 되나 관계의 반정규화는 데이터 무결성을 깨뜨릴 위험을 갖지 않고서도 데이터처리의 성능을 향상시킬 수 있는 반정규화의 기법이 된다. 
>
> 
>
> 제 4절 : 대량 데이터에 따른 성능 
>
> > 1. 대량 데이터 발생에 따른 테이블 분할 개요
> >
> > Q. 차선이 넓은 도로에서 정체현상이 발생한다면? : 병목현상등 고려 가능 
> >
> > - 테이블 분할 설계를 통한 성능 저하의 예방 
> >
> > > * 수평 분할: 컬럼 단위로 분할하여 I/O 경감
> > > * 수직 분할: 로우 단위로 분할하여 I/O 경감 
> > >
> > > ![트랜잭션 분할](.\트랜잭션 분할.PNG)
> >
> > - 성능저하의 원인 
> >
> > > 1) 하나의 테이블에 데이터 집중
> > >
> > > > 한 테이블에 데이터가 대량으로 집중될 때 테이블 구조가 너무 커져서 효율성이 떨어져 처리할 때 디스크 I/O를 많이 유발하게 된다 
> > >
> > > 2) 하나의 테이블에 여러개의 컬럼 존재
> > >
> > > > 이 경우 디스크의 점유량이 높아지고 데이터를 읽는 I/O량이 많아져서 성능이 저하된다. 
> > >
> > > 3) 대량이 데이터가 처리되는 테이블의 경우 
> > >
> > > > SQL문장에서 데이터를 처리하기 위한 I/O의 양이 증가한다. 인덱스를 적절하게 구성하여 이용하면 이를 줄일 수 있다. 
> > >
> > > 4) 대량이 데이터가 하나의 테이블에 존재할 때 
> > >
> > > > 인덱스를 생성할 때 인덱스의 크기(용량) 가 커지게 되고 그렇게 되면 인덱스를 찾아가는 단계가 깊어지게 되어 조회의 성능에도 영향을 미치게 됨 
> > > >
> > > > → 인덱스가 커지면? 
> > > >
> > > > ```
> > > > select → OK
> > > > insert/update/delete → 성능저하 
> > > > ```
> > >
> > > 5) 컬럼이 많아지는 경우 
> > >
> > > > 물리적인 디스크에 의해 여러 블록의 데이터가 저장되게 된다. 
> > > >
> > > > 예/ 만약 컬럼수가 300개라면? 
> > >
> > > ```
> > > - 로우 체이닝(row chaining)현상이란?
> > > 로우 길이가 너무 길어서 블록 안에 데이터가 모두 저장되지 않고 두개 이상의 블록에 걸쳐 하나의 로우가 저장되어 있는 형태
> > > 
> > > - 로우 마이그레이션(row migration)
> > > 데이터 블록에서 수정이 발생하면 수정된 데이터를 해당 데이터 블록에서 저장하지 못하고 다른 블록의 빈 공간을 찾아 저장하는 방식 
> > > 
> > > 두가지 모두 불필요한 I/O 가 많이 발생하여 성능이 저하된다. 
> > > ```
> > >
> > > 
> >
> > 2. 한 테이블에 많은 수의 컬럼을 가지고 있는 경우 
> >
> > 3. 대량데이터 저장 및 처리로 인해 성능이 저하되는 경우 
> >
> > > - <u>파티셔닝</u>, 또는 <u>PK에 의한 테이블 분할</u> 로 해결한다 
> > >
> > > > * 파티셔닝
> > > >
> > > > 1 ) Range Partition
> > > >
> > > > ```
> > > > - 가장 많이 사용됨 
> > > > - 적용대상:대상 테이블의 날짜 or 숫자값으로 분리가 가능하고, 각 영역별로 
> > > > 		  트렌젝션이 분리 
> > > > - 장점:데이터보관주기에 따라 테이블에 데이터를 쉽게 지우는 것이 가능함 
> > > > ```
> > > >
> > > > ![range파티셔닝](.\range파티셔닝.PNG)
> > > >
> > > > 2) List Partition
> > > >
> > > > ```
> > > > - 장점:대용량 데이터를 특정값에 따라 분리/저장 가능
> > > > - 단점:쉽게 삭제되는 기능은 없다 
> > > > ```
> > > >
> > > > 
> > > >
> > > > ![list파티셔닝](.\list파티셔닝.PNG)
> > > >
> > > > 3) Hash Partition
> > > >
> > > > ```
> > > > 저장된 해쉬 조건에 따라 해슁 알고리즘이 적용되어 테이블이 분리된다. 데이터의 확인이 어렵고 삭제가 불가능 
> > > > ```
> >
> > 4. 테이블에 대한 수평분할/수직분할의 절차 (4가지 원칙)
> >
> > ```
> > 1) 데이터 모델링을 완성한다 
> > 2) 데이터베이스 용량선정을 한다. → 컬럼수가 많은가?
> > 3) 대량 데이터가 처리되는 테이블에 대해서 트랜잭션 처리 패턴을 분석한다 
> > 4) 컬럼 단위로 집중된 처리가 발생되는지, 로우 단위로 집중된 처리가 발생되는지 
> >    분석하여 집중화된 단위로 테이블을 분리하는 것을 검토한다. 
> >    - 컬럼수가 많으면? → 1:1로 분리 가능한지 검토한다.
> >    - 컬럼수가 적으나 데이터 양이 많으면? → 파티셔닝을 고려한다 
> > ```
> >
> > 
> >
> > 
>
> 제 5절 : 데이터베이스 구조와 성능 
>
> > 1. 슈퍼/ 서브타입 모델의 성능고려 방법 
> >
> > > - 슈퍼/서브타입 데이터 모델(Extended ER Model)의 개요 
> > >
> > > ```
> > > - 최근 가장 많이 쓰임 (업무를 구성하는 데이터를 공통과 차이점을 특징을 고려하여 효과적으로 표현할 수 있기 때문)
> > > - 공통의 부분 → 슈퍼타입
> > > - 공통으로부터 상속받아 다른 엔티티와 차이가 있는 속성 → 서브타입 
> > > - 논리적 데이터 모델에서 이용되는 형태이며, 분석단계에서 많이 쓰이는 모델 
> > > - 물리적 데이터 모델로 설계시에 문제점이 나타남 (적당한 노하우가 없음)
> > >   → 1:1타입이 되거나 All in one 타입이 되어버림(성능저하)
> > > ```
> > >
> > > 
>
> 제 6절 : 분산 데이터베이스와 성능 

