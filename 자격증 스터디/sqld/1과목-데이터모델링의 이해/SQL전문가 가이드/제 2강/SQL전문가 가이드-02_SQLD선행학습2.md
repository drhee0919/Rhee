#### <목차 -  'SQL전문가 가이드' 유투브강의 필기내용>

관련링크 : https://www.youtube.com/channel/UCpTEAgCQ98rFEwTbgJf9lsA/playlists



#### 제 2강: SQLD 선행학습2

**정규화의 의미**

> - 정규화
>
> > 자료 저장 공간을 최소화하고 데이터베이스 내의 데이터가 불일치 되는 위험을 최소화하여 좋은 데이터베이스를 설계하는 것을 목적 
> >
> > → 쉽게 말해 테이블을 잘게 쪼개는 것. 
> >
> > > 데이터를 쪼갬으로서 데이터가 중복되는 것을 막고, 중복되는 것이 적어질 수록 나중에 데이터를 나중에 고치거나, 추가하거나, 지우거나 할때 문제점이 발생되는 확률을 줄여줄 수 있다. 
> >
> > ![데이터중복문제](.\데이터중복문제.PNG)
>
> 1-1 수정 이상
>
> > - 중복 데이터 중에서 일부만 갱신되어 정보의 모순이 발생하는 것 
> >
> > ![수정이상](.\수정이상.PNG)
> >
> > 
>
> 1-2 삽입 이상
>
> > - 불필요한 정보를 함께 저장하지 않음 
> > - 어떤 정보를 저장하는 것이 불가능하기에 원하지 않는 정보를 강제로 삽입해야 하는 것 
> >
> > ![삽입이상](.\삽입이상.PNG)
>
> 1-3 삭제 이상 
>
> > - 유용한 정보를 함께 삭제하기 않고는 어떤 정보를 삭제하는 것이 불가능한 것 
> >
> >   ![삭제이상](.\삭제이상.PNG)
>
> - 정규화를 통해서 상기 갱신 이상이 생기지 않도록 불필요한 데이터가 중복되어 저장되지 않게 방지하여 바람직한 릴레이션 스키마로 만듦
> - 정규화의 목적
>
> > * 반복적인 자료를 제거하여 다음과 같은 상태를 만드는 것 
>
> ```
> 1. 어떤 관계라도 데이터베이스 내에서 표현이 가능하도록 만드는 것 
> 2. 관계에서 바람직하지 않은 삽입, 삭제, 갱신 이상이 발생하지 않도록 함 
> 3. 새로운 형태의 데이터가 삽입될 떄 관계를 재구성할 필요성을 줄이고 있음 
> 4. 보다 간단한 관계 연산에 기초하여 검색을 보다 효율적으로 할 수 있음 
> ```
>
> 

**함수 종속**

> -  함수적 종속 정의 : X → Y
> - 결정자(determinant)
>
> > 주어진 릴레이션에서 다른 속성(또는 속성들의 집합)을 고유하게 결정하는 하나 이상의 속성 
> >
> > → 간혹 특정 컬럼의 값(A)은 다른 특정 컬럼(B)에 의해서 결정되는 경우가 있다 .
> >
> > ![결정자](.\결정자.PNG)
> >
> > → 위 테이블의 기본키는 '학번'과 '과목명'(두개 합해서)
> >
> > → '성적' 이란 컬럼은 하나의 컬럼에 의해서만 결정되지 않는다 
> >
> > ​    (ex/ 101번 학생은 데이터 통신 과목의 성적이 76점이다.)
>
> - 함수적 종속의 성질
>
> > * 완전함수종속(FFD:  Full Function Dependency) → 위의 '성적' 컬럼
> > * 부분함수종속(PFD: Partial Funtional Dependancy) → 위의 '이름' 컬럼 
> >
> > → 완전함수 종속으로 구성된 테이블일수록 더 정규화가 잘 된 테이블이라 할 수 있음 
> >
> > ​	 (제 2 정규화의 조건)
>
> - 함수 종속 다이어그램 
>
> > 릴레이션 내의 속성들의 종속 관계를 보다 쉽게 이해하기 위해서 이를 도식적으로 표시 
>
> ![함수 종속 다이어그램](.\함수 종속 다이어그램.PNG)

**정규화 과정**

> - 정규화(Normalization)
>
> > 주어진 릴레이션 스키마를 함수적 종속성 등의 종속 이론을 이용하여 잘못된 릴레이션 스키마를 보다 더 작은 속성의 세트로 나누어서 갱신 이상이 발생하지 않는 바람직한 릴레이션 스키마로 만드는 과정 
>
> - 정규형 (Normal Form)
>
> > 테이블의 정규화된 정도 (비 정규형에서 제5정규형까지)
> >
> > ![정규형들간의 관계](.\정규형들간의 관계.PNG)
> >
> > → 통상 BCNF(보이스/코드 정규형)까지 구현하는 경우가 많음.
> >
> > → 좀더 편하게 다루고자 한다면 2,3 정규형 선에서 일단락되는 경우도 있다. 
>
> 1-1 제 1정규형(1NF)
>
> > - 제 1정규형에 만족하는 릴레이션 
> >
> > > * 어떤 릴레이션 R에 속한 모든 도메인이 원잣값(atomic value)
> > > * 릴레이션 속성값이 반복 집단이 없는, 즉 더 이상 분해될 수 없는 원자값으로 구성 
> >
> > - 반복 집합이 있는 비정규 릴레이션 
> >
> > > * 반복 집합은 한 개의 기본키 값에 대해서 두 개 이상의 값을 가질 수 있는 속성 
> > >
> > > ![반복집합의 비정규릴레이션](.\반복집합의 비정규릴레이션.PNG)
> >
> > → 제 1정규화 과정
> >
> > ![제 1정규화](.\제 1정규화.PNG)
> >
> > 
>
> 1-2 제 2정규형(2NF)
>
> > - 어떤 릴레이션 R이 제 1정규형이고, 키에 속하지 않는 속성 모두가 키에 <u>완전함수 종속</u>일때 
> >
> > → 기본키에 의해서 다른 컬럼들의 값이 결정되면 된다.
> >
> > - 제 2정규화의 개념 
> >
> > ![제 2정규화 과정의 개념](.\제 2정규화 과정의 개념.PNG)
> >
> > ![제 2정규화](.\제 2정규화.PNG)
> >
> > * 제2정규화 과정의 함수종속다이어그램 
> >
> > ![제 2정규화 다이어그램](.\제 2정규화 다이어그램.PNG)
> >
> > → 수정, 삭제, 삽입 시 오류 발생 확률이 현저히 낮아진다.  
> >
> > 
> >
> > - 무존실 분해(noneloss decomposition)
> >
> > > 자연 조인하였을 때 아무런 정보 손실 없이 다시 원래의 릴레이션으로 복귀된다면 2NF로 두개의 릴레이션으로 분해하는 것 
> > >
> > > 
>
> 1-3 제 3정규형(3NF)
>
> > 어떤 릴레이션 R이 2NF이고, 모든 속성들이 기본키에 이행적 함수 종속(transitive FD)을 제외 
> >
> > * 이행적 함수 종속성
> >
> > > 3개의 속성에 존재하는 함수의 종속성을 의미 
> > >
> > > ![이행적함수종속](.\이행적함수종속.PNG)
> > >
> > > → A에 의해서 B가 결정되고 B에 의해서 C가 결정된다면, 결과적으로 A에 의해서 C까지 결정되게 된다. 이를 이행적 함수 종속이라 지칭.
> > >
> > > → 결국 A→B 따로,  B→C 따로 구현해야 한다. 
> > >
> > > (예시)
> > >
> > > ![이행적함수종속 예시](.\이행적함수종속 예시.PNG)
> > >
> > > ![이행적함수종속으로 인한 갱신이상](.\이행적함수종속으로 인한 갱신이상.PNG)
> > >
> > > ![이행적함수 종속으로 인한 삽입이상](.\이행적함수 종속으로 인한 삽입이상.PNG)
> > >
> > > ![이행적함수종속으로 인한 삭제이상](.\이행적함수종속으로 인한 삭제이상.PNG)
> >
> > 
> >
> > - 제 3정규화의 개념 
> >
> > ![제 2정규화 과정의 개념](.\제 2정규화 과정의 개념.PNG)
> >
> > ![제 3정규화 과정](.\제 3정규화 과정.PNG)
> >
> > - 제3정규화 과정의 함수종속다이어그램 
> >
> > ![제 3정규화 함수종속다이어그램](.\제 3정규화 함수종속다이어그램.PNG)
> >
> > 
>
> 1-4 보이스/코드 정규형(BCNF)



**학습정리**

- 이상(anomly) 현상

> * 속성 간에 존재하는 여러 종속 관계를 하나의 릴레이션에 포현함으로서 데이터의 중복으로 인해 발생하는 여러 가지 현상 
>
> > * 삭제 이상 : 연쇄삭제에 의한 정보의 손실
> > * 삽입 이상 : 원하지 않는 정보의 강제 삽입
> > * 갱신 이상 : 중복 데이터의 일부 갱신으로 정보의 모순성 발생 

- 정규화(normalization)

> 이상 문제를 해결하기 위해 어트리뷰트(속성)간의 종속 관계를 분석하여 여러개의 릴레이션 으로 분해하는 과정 

- 함수 종속

> 어떤 릴레이션에서 속성들의 부분 집합을 X, Y라 할때, 임의 튜플에서 X의 값이 Y의 값을 함수적으로 결정한다면, Y가 X에 함수적으로 종속되었다고 하고, 기호로는 X → Y 로 표기함 

- 함수 종속 다이어그램

> 릴레이션 내의 속성들의 종속 관계를 보다 쉽게 이해하기 위해서는 이를 도식적으로 표현함



